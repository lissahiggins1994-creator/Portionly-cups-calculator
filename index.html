<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Portionly Cup Calculator</title>

  <style>
    :root {
      --bg: #f7f2ff;
      --card: #ffffff;
      --accent: #6c4efd;
      --accent-soft: #ebe3ff;
      --text-main: #241935;
      --text-muted: #6e6489;
      --border-soft: #ded3ff;
    }

    * {
      box-sizing: border-box;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI",
        sans-serif;
    }

    body {
      margin: 0;
      padding: 0;
      background: var(--bg);
      color: var(--text-main);
    }

    .page {
      max-width: 680px;
      margin: 32px auto 48px;
      padding: 0 16px;
    }

    .logo-area {
      text-align: center;
      margin-bottom: 12px;
    }

    .logo-img {
      width: 110px;
      height: 110px;
      border-radius: 28px;
      object-fit: cover;
      display: block;
      margin: 0 auto 8px;
    }

    .logo-text {
      font-size: 0.8rem;
      letter-spacing: 0.16em;
      text-transform: uppercase;
      color: var(--text-muted);
      font-weight: 700;
    }

    h1 {
      text-align: center;
      font-size: 1.9rem;
      margin: 10px 0 4px;
    }

    .tagline {
      text-align: center;
      font-size: 0.95rem;
      color: var(--text-muted);
      margin-bottom: 20px;
    }

    .card {
      background: var(--card);
      border-radius: 18px;
      padding: 20px 16px 22px;
      box-shadow: 0 16px 40px rgba(40, 10, 120, 0.08);
      border: 1px solid var(--border-soft);
    }

    .note {
      font-size: 0.85rem;
      color: var(--text-muted);
      margin-bottom: 14px;
      line-height: 1.4;
    }

    label {
      display: block;
      font-size: 0.9rem;
      font-weight: 600;
      margin: 10px 0 5px;
      color: #3a2b58;
    }

    input[type="number"],
    select {
      width: 100%;
      padding: 9px 10px;
      border-radius: 10px;
      border: 1px solid #d7ccf5;
      font-size: 0.95rem;
      outline: none;
      background: #fbf9ff;
    }

    input[type="number"]:focus,
    select:focus {
      border-color: var(--accent);
      box-shadow: 0 0 0 2px var(--accent-soft);
      background: #ffffff;
    }

    .row {
      display: flex;
      gap: 10px;
    }

    .row > div {
      flex: 1;
    }

    button {
      width: 100%;
      margin-top: 16px;
      padding: 11px 14px;
      border-radius: 999px;
      border: none;
      background: var(--accent);
      color: #fff;
      font-size: 1rem;
      font-weight: 650;
      cursor: pointer;
    }

    button:hover { filter: brightness(1.05); }
    button:active { transform: translateY(1px); }

    .result {
      margin-top: 18px;
      padding: 14px 14px 12px;
      border-radius: 14px;
      background: #f2ecff;
      border: 1px solid var(--border-soft);
      font-size: 0.95rem;
      text-align: left;
    }

    .result p { margin: 0 0 6px; }

    .cups-list {
      list-style: none;
      padding-left: 0;
      margin: 6px 0 4px;
    }

    .cups-list li { margin-bottom: 4px; }

    .cups-label {
      display: inline-block;
      min-width: 130px;
      font-weight: 600;
    }

    .disclaimer {
      margin-top: 10px;
      font-size: 0.8rem;
      color: var(--text-muted);
      line-height: 1.4;
    }

    .footer-text {
      text-align: center;
      margin-top: 16px;
      font-size: 0.85rem;
      color: var(--text-muted);
    }

    @media (max-width: 480px) {
      .page {
        margin-top: 20px;
        padding: 0 12px;
      }
      .card {
        padding: 18px 14px 18px;
      }
    }
  </style>
</head>

<body>
  <div class="page">
    <div class="logo-area">
      <!-- your logo file must be in the same repo -->
      <img src="portionly-logo.png"
           alt="Portionly Wellbeing logo"
           class="logo-img" />
      <div class="logo-text">Portionly Wellbeing</div>
    </div>

    <h1>Portionly Cup Calculator</h1>
    <p class="tagline">
      No maths. No guilt. Just a gentle starting point you can adjust as you go.
    </p>

    <div class="card">
      <p class="note">
        Fill this in to get a rough daily guide for your Portionly cups.
        These numbers are <strong>guidelines, not rules</strong>.
        Your next meal is always a fresh chance to come back to your cups.
      </p>

      <label for="gender">Gender</label>
      <select id="gender">
        <option value="">Select gender</option>
        <option value="female">Female</option>
        <option value="male">Male</option>
      </select>

      <div class="row">
        <div>
          <label for="age">Age (years)</label>
          <input id="age" type="number" min="16" max="90" />
        </div>
        <div>
          <label for="height">Height (cm)</label>
          <input id="height" type="number" min="120" max="220" />
        </div>
      </div>

      <label for="weight">Weight (kg)</label>
      <input id="weight" type="number" min="35" step="0.1" max="250" />

      <label for="activity">Activity level</label>
      <select id="activity">
        <option value="">Select activity level</option>
        <option value="1.2">Sedentary (desk most of the day)</option>
        <option value="1.375">Lightly active (on your feet a fair bit)</option>
        <option value="1.55">Moderately active (regular walks / workouts)</option>
        <option value="1.725">Very active (physical job or intense training)</option>
        <option value="1.9">Extra active (manual labour + hard training)</option>
      </select>

      <button type="button" onclick="portionlyCalculate()">
        Calculate cups
      </button>

      <div id="portionly-result" class="result" style="display:none;"></div>

      <p class="disclaimer">
        This tool uses the same equations as your original beta app
        (Mifflin–St Jeor plus an activity factor) to estimate a gentle calorie
        target and convert that into Portionly cups. It’s for education only,
        not medical advice. If you have health conditions, are pregnant, or have
        specific dietary needs, please speak with a healthcare professional.
      </p>
    </div>

    <p class="footer-text">
      Use your cups to guide your <em>next</em> meal — not to chase perfection or wait for Monday.
    </p>
  </div>

  <script>
    // exact logic from your beta app
    function calculateTargets(p) {
      let BMR =
        p.gender === "female"
          ? 10 * p.weight + 6.25 * p.height - 5 * p.age - 161
          : 10 * p.weight + 6.25 * p.height - 5 * p.age + 5;

      const TDEE = BMR * p.activity;

      // baseline deficit
      let target = Math.round(TDEE * 0.83);

      // safe minimums
      const min = p.gender === "female" ? 1200 : 1500;
      if (target < min) target = min;

      // cups from hidden target
      const cups = {
        Protein: Math.max(3, Math.round((target * 0.3) / 120)),
        Carbs: Math.max(3, Math.round((target * 0.4) / 130)),
        Veggies: 5,
        Fruits: 3,
        "Healthy Fats": Math.max(2, Math.round((target * 0.25) / 100)),
      };

      return { cups, targetCalories: target };
    }

    function portionlyCalculate() {
      const gender = document.getElementById("gender").value;
      const age = parseFloat(document.getElementById("age").value);
      const height = parseFloat(document.getElementById("height").value);
      const weight = parseFloat(document.getElementById("weight").value);
      const activityVal = document.getElementById("activity").value;
      const resultDiv = document.getElementById("portionly-result");

      if (!gender || !age || !height || !weight || !activityVal) {
        resultDiv.style.display = "block";
        resultDiv.innerHTML = "<p>Please fill in all fields above.</p>";
        return;
      }

      const activity = parseFloat(activityVal);

      const profile = { gender, age, height, weight, activity };
      const { cups, targetCalories } = calculateTargets(profile);

      resultDiv.style.display = "block";
      resultDiv.innerHTML = `
        <p>Approximate daily target: <strong>${targetCalories}</strong> calories (guideline only).</p>
        <p>Your Portionly cups per day:</p>
        <ul class="cups-list">
          <li><span class="cups-label">Protein</span> ${cups["Protein"]} cups</li>
          <li><span class="cups-label">Carbs</span> ${cups["Carbs"]} cups</li>
          <li><span class="cups-label">Veggies</span> ${cups["Veggies"]} cups</li>
          <li><span class="cups-label">Fruit</span> ${cups["Fruits"]} cups</li>
          <li><span class="cups-label">Healthy fats</span> ${cups["Healthy Fats"]} cups</li>
        </ul>
        <p>
          These are starting points, not a rulebook.
          Some days you'll eat more, some less. If a meal goes off-plan,
          your very next meal still counts — come back to your cups without guilt.
        </p>
      `;
    }
  </script>
</body>
</html>
