<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Portionly Cup Calculator</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <style>
    :root {
      --bg: #f6ecff;
      --card-bg: #ffffff;
      --accent: #f08fb4;
      --text-main: #2b2136;
      --text-muted: #7b6a90;
      --border-subtle: #efe3ff;
      --radius-card: 22px;
      --shadow-soft: 0 18px 45px rgba(64, 33, 90, 0.16);
    }

    * { box-sizing: border-box; }

    body {
      margin: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: var(--bg);
      color: var(--text-main);
    }

    .page-wrap {
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 32px 16px;
    }

    .inner { max-width: 720px; width: 100%; }

    .logo { display: block; margin: 0 auto 12px; max-width: 140px; }

    .brand {
      text-align: center;
      font-size: 12px;
      letter-spacing: 0.18em;
      text-transform: lowercase;
      color: #a38ac7;
      margin-bottom: 6px;
    }

    .title { text-align: center; font-size: 26px; font-weight: 800; margin-bottom: 4px; }

    .subtitle {
      text-align: center;
      font-size: 14px;
      color: var(--text-muted);
      margin-bottom: 24px;
    }

    .card {
      background: var(--card-bg);
      border-radius: var(--radius-card);
      box-shadow: var(--shadow-soft);
      padding: 22px;
      border: 1px solid var(--border-subtle);
    }

    .card-header-text { font-size: 14px; color: var(--text-muted); margin-bottom: 14px; }

    .field { margin-bottom: 12px; }
    label { font-size: 13px; font-weight: 600; margin-bottom: 4px; display: block; }

    input[type="number"], select {
      width: 100%;
      padding: 8px 10px;
      border-radius: 10px;
      border: 1px solid #e1d4ff;
      background: #faf7ff;
      font-size: 14px;
    }

    .grid-two { display: grid; grid-template-columns: repeat(2,1fr); gap: 12px; }

    .unit-row { display:flex; gap:8px; margin-top:4px; }

    .unit-pill {
      padding:5px 10px; border-radius:999px; border:1px solid #e6d5ff;
      background:#faf7ff; font-size:11px; cursor:pointer;
    }
    .unit-pill.active { background:var(--accent); border-color:var(--accent); color:#fff; }

    .pace-row { display:flex; gap:8px; flex-wrap:wrap; margin-top:4px; }

    .pace-pill {
      flex:1; min-width:90px; border-radius:999px; border:1px solid #e6d5ff;
      padding:7px 10px; font-size:13px; display:flex; justify-content:center; gap:4px;
      background:#faf7ff; cursor:pointer;
    }
    .pace-pill.active { background:var(--accent); color:#fff; }

    .btn-main {
      margin-top:14px; width:100%; border-radius:999px; padding:11px 16px;
      border:none; font-weight:700; background:linear-gradient(135deg,#ff9ac0,#f08fb4);
      color:#fff;
    }

    .results { margin-top:18px; padding:14px; border-radius:16px; border:1px solid #f1ddff; }
    .cups-list { list-style:none; padding:0; }
    .cups-list li { display:flex; justify-content:space-between; padding:4px 0; }
    .healthy { font-size:11px; color:var(--text-muted); margin-top:6px; }
  </style>
</head>

<body>
<div class="page-wrap">
  <div class="inner">

    <img src="portionly-logo.png" class="logo" alt="Portionly logo" />
    <div class="brand">portionly wellbeing</div>
    <div class="title">Portionly Cup Calculator</div>
    <div class="subtitle">No maths. No guilt. Just a gentle starting point you can adjust as you go.</div>

    <div class="card">
      <div class="card-header-text">
        Fill this in to get a rough daily guide. These are guidelines, not rules ‚Äî real life wobbles.
      </div>

      <form id="calc-form">
        <div class="field">
          <label>Gender</label>
          <select id="gender"><option value="female">Female</option><option value="male">Male</option></select>
        </div>

        <div class="grid-two">
          <div class="field">
            <label>Age</label>
            <input id="age" type="number" />
          </div>

          <div class="field">
            <label>Height</label>
            <input id="height-value" type="number" />
            <div class="unit-row">
              <span class="unit-pill active" data-height-unit="cm">cm</span>
              <span class="unit-pill" data-height-unit="ft">ft + in</span>
            </div>
            <div class="helper" id="height-helper">
              Using centimetres. Switch if you think in feet.
            </div>
          </div>
        </div>

        <div class="field">
          <label>Weight</label>
          <input id="weight-value" type="number" />
          <div class="unit-row">
            <span class="unit-pill active" data-weight-unit="kg">kg</span>
            <span class="unit-pill" data-weight-unit="lb">lbs</span>
            <span class="unit-pill" data-weight-unit="stone">stone &amp; oz</span>
          </div>
          <div class="helper" id="weight-helper">
            Using kilograms. Switch if you think in pounds or stone.
          </div>
        </div>

        <div class="field">
          <label>Activity level</label>
          <select id="activity">
            <option value="1.2">Sedentary</option>
            <option value="1.55">Moderate</option>
          </select>
        </div>

        <div class="field">
          <label>How fast do you want to move?</label>
          <div class="pace-row" id="pace-row">
            <label class="pace-pill active" data-pace="gentle">üåø Gentle</label>
            <label class="pace-pill" data-pace="standard">‚öñÔ∏è Standard</label>
            <label class="pace-pill" data-pace="faster">üî• Faster</label>
          </div>
        </div>

        <button class="btn-main">Calculate my cups</button>
      </form>

      <div id="results" class="results" style="display:none;">
        <div id="results-title"></div>
        <ul id="cups-list" class="cups-list"></ul>
        <div id="healthy-range" class="healthy"></div>
      </div>

    </div>
  </div>
</div>

<script>
const KCAL = { Protein:120, Carbs:130, Veggies:25, Fruits:65, "Healthy Fats":100 };

let heightUnit="cm", weightUnit="kg", pace="gentle", lastProfile=null;

document.querySelectorAll("[data-height-unit]").forEach(p=>p.onclick=()=>{
  heightUnit=p.dataset.heightUnit;
  document.querySelectorAll("[data-height-unit]").forEach(el=>el.classList.toggle("active",el===p));
  document.getElementById("height-helper").textContent =
    heightUnit==="cm"
      ? "Using centimetres. Switch if you think in feet."
      : "Using ft + in as one number. For example 5 ft 6 in ‚Üí type 5.5";
});

document.querySelectorAll("[data-weight-unit]").forEach(p=>p.onclick=()=>{
  weightUnit=p.dataset.weightUnit;
  document.querySelectorAll("[data-weight-unit]").forEach(el=>el.classList.toggle("active",el===p));
  document.getElementById("weight-helper").textContent =
    weightUnit==="kg"
      ? "Using kilograms."
      : weightUnit==="lb"
      ? "Using pounds. Enter whole pounds (e.g. 180)."
      : "Using stone & oz as a decimal. Example: 11.5 ‚âà 11 st 7 lb.";
});

document.getElementById("pace-row").onclick=e=>{
  const pill=e.target.closest(".pace-pill"); if(!pill)return;
  pace=pill.dataset.pace;
  document.querySelectorAll(".pace-pill").forEach(el=>el.classList.toggle("active",el===pill));
  if(lastProfile) render(calculate(lastProfile,pace), lastProfile);
};

function BMR({gender,weightKg,heightCm,age}){
  return 10*weightKg+6.25*heightCm-5*age+(gender==="female"?-161:5);
}
function TDEE(p){ return BMR(p)*p.activityFactor; }

function targetCalories(profile, pace){
  const t=TDEE(profile);
  const frac = pace==="gentle"?0.10:pace==="faster"?0.20:0.15;
  let c=t-(t*frac);
  const min=profile.gender==="female"?1200:1500;
  return Math.round(Math.max(c,min));
}

function cups(cal){
  const s={Protein:0.3, Carbs:0.4, "Healthy Fats":0.3};
  let p=Math.round(cal*s.Protein/120);
  let c=Math.round(cal*s.Carbs/130);
  let f=Math.round(cal*s["Healthy Fats"]/100);
  return {
    Protein:Math.max(p,3),
    Carbs:Math.max(c,3),
    Veggies:cal<1600?4:cal<2200?5:6,
    Fruits:cal<1600?2:3,
    "Healthy Fats":Math.max(f,2)
  };
}

function calculate(profile, pace){
  const t=targetCalories(profile,pace);
  return {cups:cups(t)};
}

document.getElementById("calc-form").onsubmit=e=>{
  e.preventDefault();
  const gender=gender.value;
  const ageV=parseFloat(age.value);
  const h=parseFloat(height-value.value);
};
</script>
</body>
</html>
